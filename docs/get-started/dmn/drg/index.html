<!doctype html><html class=no-js><head><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-N39WSFRC');</script><meta charset=utf-8><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width"><meta name=description content="documentation of EximeeBPMS"><meta name=keywords content="eximeebpms,camunda,open source,free,Apache License,Apache 2.0,workflow,BPMN,BPMN 2.0,camunda.org,bpm,BPMS,engine,platform,process,automation,community,documentation"><meta name=author content="EximeeBPMS Community"><title>Model, Evaluate and Deploy a Decision Requirements Graph</title><meta name=generator content="Hugo 0.54.0"><link rel="shortcut icon" href=/get-started/img/favicon.ico type=image/x-icon><link rel=stylesheet href=/get-started/css/docs.1a80c41a53865478f2abc07abb399b90f61e52ede37c5756387ecee7bfabf3a4.css integrity="sha256-GoDEGlOGVHjyq8B6uzmbkPYeUu3jfFdWOH7O57&#43;r86Q="></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N39WSFRC" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><nav class="navbar navbar-fixed-top"><div class=navbar-container><div class=navbar-header><a href=/get-started/><img src=/get-started/img/eximeeBPMSLogo.png style="height:20px;width:auto;padding:0 5px 7px 0">
<span class=brand-name></span><span class=site-name></span></a></div><ul class=header-menu><li class=active><a href=/get-started>Get Started</a></li><li><a href=/manual/latest>Manual</a></li><li><a href=/security>Security</a></li></ul><button class=site-menu-toggle>
<span></span><span></span><span></span></button><div class=search-field style=display:none><input type=search class=search-input placeholder=Searchâ€¦></div><ul class=external-menu><li class=external><a href=https://eximeebpms.org/>eximeebpms.org</a></li></ul></div></nav><div class=search-results><ul class=results-list></ul><footer><button class="btn btn-default page previous">
<span class="glyphicon glyphicon-chevron-left"></span></button>
<button class="search-close btn btn-default">
<span class="glyphicon glyphicon-remove"></span></button>
<button class="btn btn-default page next">
<span class="glyphicon glyphicon-chevron-right"></span></button></footer></div><div class=search-underlay></div><nav class=site-menu><div class=version></div><ul class=site-menu-items><li><a href=/get-started/quick-start/>Quick Start (Java / JS)</a><ul><li><a href=/get-started/quick-start/install/>Download and Installation</a></li><li><a href=/get-started/quick-start/service-task/>Executable Process</a></li><li><a href=/get-started/quick-start/deploy/>Deploy the Process</a></li><li><a href=/get-started/quick-start/user-task/>Involve Humans</a></li><li><a href=/get-started/quick-start/gateway/>Make It Dynamic</a></li><li><a href=/get-started/quick-start/decision-automation/>Decision Automation</a></li></ul></li><li><a href=/get-started/spring-boot/>Spring Boot</a><ul><li><a href=/get-started/spring-boot/project-setup/>Project Setup</a></li><li><a href=/get-started/spring-boot/configuration/>Configuration</a></li><li><a href=/get-started/spring-boot/model/>Model a Process</a></li></ul></li><li><a href=/get-started/dmn/>DMN</a><ul><li><a href=/get-started/dmn/install/>Download and Installation</a></li><li><a href=/get-started/dmn/project-setup/>Project Setup</a></li><li><a href=/get-started/dmn/model/>Create a Decision Table</a></li><li><a href=/get-started/dmn/deploy/>Evaluate and Deploy the Decision Table</a></li><li><a href=/get-started/dmn/drg/>Decision Requirements Graph</a></li></ul></li><li><a href=/get-started/apache-maven/>Maven Coordinates</a></li></ul><div class=meta><h4 class=header><span class="toggle glyphicon glyphicon-chevron-up"></span>Options</h4><div class=content><label for=version-select>Version:</label>
<select id=version-select data-basepath=/get-started base-url=/get-started/></select></div></div></nav><div class=page-wrapper><div class=page-content><div class=container-fluid><div class="col-xs-12 content-header"><div class=edit-on-github><a target=_blank href=https://github.com/EximeeBPMS/eximeebpms-docs/tree/master/get-started/content/dmn/drg.md><i>Edit on Github</i> <span class=cam-docs-github></span></a></div><h1 class=page-title>Model, Evaluate and Deploy a Decision Requirements Graph</h1></div><div class="col-xs-12 content-text"><p>In this step, we extend the previous example by a second decision <em>Beverages</em> which uses the <em>Dish</em> decision table as input. We model this dependency between the decisions within a Decision Requirements Graph (DRG) using the Camunda Modeler. Then, we adjust the Application class to evaluate the <em>Beverages</em> decision, deploy the web application to Apache Tomcat and verify the result in Cockpit.</p><div class="note bg-info docs-info"><h3>Decision Requirements Graph vs. Decision Requirements Diagram</h3><p>The visual representation of a Decision Requirements Graph (DRG) is called Decision Requirements Diagram (DRD). In the context of the Camunda Modeler, we name it DRD because we use the visual representation to model the DRG.</p></div><h1 id=switch-from-decision-table-to-drd>Switch from Decision Table to DRD</h1><p>Open the <em>Dish</em> decision table from the previous step. Click on the button &ldquo;View DRD&rdquo; to see the Decision Requirements Diagram (DRD). It contains a single decision with the name <em>Dish</em>.</p><figure class=image><span><img src=../img/modeler-drd-step1.png></span></figure><h1 id=set-the-name-and-the-id-of-the-drd>Set the Name and the Id of the DRD</h1><p>Click somewhere on the canvas and open the Property Panel on the right. Change the <a href=/manual/latest/reference/dmn11/drg/#decision-requirements-graph-id>id</a> of the DRD to &ldquo;dinnerDecisions&rdquo;. Next, change the <a href=/manual/latest/reference/dmn11/drg/#decision-requirements-graph-name>name</a> of the DRD to &ldquo;Dinner Decisions&rdquo;.</p><figure class=image><span><img src=../img/modeler-drd-step2.png></span></figure><h1 id=create-a-new-decision-in-the-drd>Create a new Decision in the DRD</h1><p>Click on the decision icon of the palette to create a new decision. Then, double-click on the decision and type <em>Beverages</em> to set the name. Change the type of the decision to <em>Decision Table</em> by clicking on the wrench icon next to the &ldquo;Beverages&rdquo; decision and selecting &ldquo;Decision Table&rdquo;. Use the Property Panel on the right side again to set the id to &ldquo;beverages&rdquo;.</p><figure class=image><span><img src=../img/modeler-drd-step3.png></span></figure><p>Next, connect the <em>Dish</em> decision to the <em>Beverages</em> decision to indicate that the <em>Dish</em> decision is a <a href=/manual/latest/reference/dmn11/drg/#required-decisions>required decision</a> of the <em>Beverages</em> decision. That means that it is used as an input for the decision and the output value &ldquo;desiredDish&rdquo; can be accessed there.</p><figure class=image><span><img src=../img/modeler-drd-step4.png></span></figure><p>Click on the top left icon of the <em>Beverages</em> decision to open the decision table.</p><h1 id=configure-the-decision-table-and-add-the-rules>Configure the Decision Table and add the Rules</h1><p>Configure the <em>Beverages</em> decision table so that it has:</p><ul><li>one input with label &ldquo;Dish&rdquo;, input expression &ldquo;desiredDish&rdquo; and type &ldquo;string&rdquo;,</li><li>second input with label &ldquo;Guests with children&rdquo;, input expression &ldquo;guestsWithChildren&rdquo; and type &ldquo;boolean&rdquo;,</li><li>an output with label &ldquo;Beverages&rdquo;, name &ldquo;beverages&rdquo; and type &ldquo;string&rdquo;,</li><li>the hit policy &ldquo;COLLECT&rdquo; (with collect operator <em>LIST</em>).</li></ul><p>Then, fill the table with the rules.</p><figure class=image><span><img src=../img/modeler-drd-step5.png></span></figure><p>Save your changes and replace the existing DMN file in the <code>src/main/resources</code> folder.</p><div class="panel-group gs-download-step-panel" id=gitStep-5><div class="panel panel-success"><div class=panel-heading><div class=pull-right><a class="btn btn-success gs-download-step-btn" href=https://github.com/camunda/camunda-get-started-dmn/archive/Step-5.zip><span i class="glyphicon glyphicon-download-alt"></span>Source Code Step-5</a></div><h4>Catch up: Get the Sources of Step-5.</h4><p class=text-muted><a href=https://github.com/camunda/camunda-get-started-dmn/archive/Step-5.zip>Download as .zip</a>
or checkout the corresponding tag with <a class=toggle-instructions>Git</a>.</p></div><div class=panel-body><p>You can checkout the current state from the <a href=https://github.com/camunda/camunda-get-started-dmn>GitHub repository</a>.</p><p>If you have not cloned the repository yet, please execute the following command:<pre class=console>git clone https://github.com/camunda/camunda-get-started-dmn.git</pre></p><p>To checkout the current state of the process application please execute the following command:<pre class=console>git checkout -f Step-5</pre>Or download as archive from <a href=https://github.com/camunda/camunda-get-started-dmn/releases/tag/Step-5>here</a>.</p></div></div></div><h1 id=evaluate-the-decision>Evaluate the Decision</h1><p>To evaluate the <em>Beverages</em> decision, we extend the existing method in your Application class and add a new variable &ldquo;guestsWithChildren&rdquo;.</p><pre><code class=language-java>package org.eximeebpms.bpm.getstarted.dmn;

@ProcessApplication(&quot;Dinner App DMN&quot;)
public class DinnerApplication extends ServletProcessApplication
{

  protected final static Logger LOGGER = Logger.getLogger(DinnerApplication.class.getName());

    @PostDeploy
    public void evaluateDecisionTable(ProcessEngine processEngine) {

      DecisionService decisionService = processEngine.getDecisionService();

      VariableMap variables = Variables.createVariables()
        .putValue(&quot;season&quot;, &quot;Spring&quot;)
        .putValue(&quot;guestCount&quot;, 10)
        .putValue(&quot;guestsWithChildren&quot;, false);

      DmnDecisionTableResult dishDecisionResult = decisionService.evaluateDecisionTableByKey(&quot;dish&quot;, variables);
      String desiredDish = dishDecisionResult.getSingleEntry();

      LOGGER.log(Level.INFO, &quot;\n\nDesired dish: {0}\n\n&quot;, desiredDish);

      DmnDecisionTableResult beveragesDecisionResult = decisionService.evaluateDecisionTableByKey(&quot;beverages&quot;, variables);
      List&lt;Object&gt; beverages = beveragesDecisionResult.collectEntries(&quot;beverages&quot;);

      LOGGER.log(Level.INFO, &quot;\n\nDesired beverages: {0}\n\n&quot;, beverages);
    }

}
</code></pre><div class="panel-group gs-download-step-panel" id=gitStep-6><div class="panel panel-success"><div class=panel-heading><div class=pull-right><a class="btn btn-success gs-download-step-btn" href=https://github.com/camunda/camunda-get-started-dmn/archive/Step-6.zip><span i class="glyphicon glyphicon-download-alt"></span>Source Code Step-6</a></div><h4>Catch up: Get the Sources of Step-6.</h4><p class=text-muted><a href=https://github.com/camunda/camunda-get-started-dmn/archive/Step-6.zip>Download as .zip</a>
or checkout the corresponding tag with <a class=toggle-instructions>Git</a>.</p></div><div class=panel-body><p>You can checkout the current state from the <a href=https://github.com/camunda/camunda-get-started-dmn>GitHub repository</a>.</p><p>If you have not cloned the repository yet, please execute the following command:<pre class=console>git clone https://github.com/camunda/camunda-get-started-dmn.git</pre></p><p>To checkout the current state of the process application please execute the following command:<pre class=console>git checkout -f Step-6</pre>Or download as archive from <a href=https://github.com/camunda/camunda-get-started-dmn/releases/tag/Step-6>here</a>.</p></div></div></div><h1 id=build-and-deploy-the-web-application>Build and Deploy the Web Application</h1><p>Build the web application with Maven and replace the <code>dinner-dmn-0.1.0-SNAPSHOT.war</code> in the <code>$EXIMEEBPMS_HOME/server/apache-tomcat/webapps</code> folder.</p><p>Check the log file of the Apache Tomcat server. If you see the following log message, the deployment was successful:</p><pre class=console>
INFO org.eximeebpms.commons.logging.BaseLogger.logInfo
ENGINE-07015 Detected @ProcessApplication class 'org.eximeebpms.bpm.getstarted.dish.DishApplication'
INFO org.eximeebpms.commons.logging.BaseLogger.logInfo
ENGINE-08024 Found processes.xml file at ../webapps/dinner-dmn-0.1.0-SNAPSHOT/WEB-INF/classes/META-INF/processes.xml
INFO org.eximeebpms.commons.logging.BaseLogger.logInfo
ENGINE-08023 Deployment summary for process archive 'dinner-dmn':

        dinnerDecisions.dmn

INFO org.eximeebpms.bpm.getstarted.dmn.DinnerApplication.evaluateDecisionTable 

Desired dish: Stew

INFO org.eximeebpms.bpm.getstarted.dmn.DinnerApplication.evaluateDecisionTable 

Desired beverages: [Guiness, Water]

INFO org.eximeebpms.commons.logging.BaseLogger.logInfo
ENGINE-08050 Process application Dinner App DMN successfully deployed
</pre><h1 id=verify-the-evaluation-with-cockpit>Verify the Evaluation with Cockpit</h1><p>Now, open <a href=http://localhost:8080/eximeebpms/app/cockpit>Cockpit</a> and go to the &ldquo;Decisions&rdquo; section.</p><figure class=image><span><img src=../img/cockpit-decision-overview-beverages-dmn.png></span></figure><p>Then, click on the decision <em>Beverages</em> and select an id to see the historic data of the evaluation.</p><figure class=image><span><img src=../img/cockpit-decision-history-beverages-dmn.png></span></figure><p>Verify that both rules were matched and the output value for the beverages is &ldquo;Guiness&rdquo; and &ldquo;Water&rdquo;.</p><p>Note that the <em>Dish</em> decision is evaluated as part of the evaluation of the <em>Beverages</em> decision. It provides the value &ldquo;Stew&rdquo; for the input expression &ldquo;desiredDish&rdquo;.</p><h1 id=next-steps>Next Steps</h1><p>Next,</p><ul><li>learn more about DRG by reading the <a href=/reference/dmn11/drg>DMN Reference</a>,</li><li>learn more about <a href=/webapps/cockpit/dmn/>DMN in Cockpit</a> and specialized views for DRGs (Enterprise Feature)</li></ul></div></div></div><div class=page-toc style=display:none><h3>On this Page:</h3><nav id=TableOfContents><ul><li><a href=#switch-from-decision-table-to-drd>Switch from Decision Table to DRD</a></li><li><a href=#set-the-name-and-the-id-of-the-drd>Set the Name and the Id of the DRD</a></li><li><a href=#create-a-new-decision-in-the-drd>Create a new Decision in the DRD</a></li><li><a href=#configure-the-decision-table-and-add-the-rules>Configure the Decision Table and add the Rules</a></li><li><a href=#evaluate-the-decision>Evaluate the Decision</a></li><li><a href=#build-and-deploy-the-web-application>Build and Deploy the Web Application</a></li><li><a href=#verify-the-evaluation-with-cockpit>Verify the Evaluation with Cockpit</a></li><li><a href=#next-steps>Next Steps</a></li></ul></nav><div class=docs-banner style=display:none><blockquote><p>We are looking for talented people.</p><p>Check out our <a href=https://camunda.com/career/>open positions</a>.</p></blockquote></div></div><footer class=page-footer><div class=row><div class=col-xs-12><p class=pull-right><a href=# target=_self>Back to top</a></p><p><a href=http://eximeebpms.org>eximeebpms.org</a> and <a href=http://docs.eximeebpms.org>docs.eximeebpms.org</a> are part of EximeeBPMS project â€” <a href=https://eximeebpms.org/document/eximee-bpms-privacy-policy//>Privacy Statement</a> â€“ <a hre=https://consdata.com/en/about-us/contact>Consdata S.A.</a><br>The EximeeBPMS documentation is based on <a href=https://docs.camunda.org/>Camunda 7 Docs</a> from Camunda. Some redesign & naming adoptation was made.</p><p><a rel=license href=http://creativecommons.org/licenses/by-sa/3.0/><img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by-sa/3.0/80x15.png></a> The content on this site is licensed under a <a rel=license href=http://creativecommons.org/licenses/by-sa/3.0/>Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.</p></div></div></footer></div><script type=text/javascript src=/get-started/js/docs.5475e58434acb556d620a23530a5e7d810d99614ce0019dfc36d72ba6700b3c9.js integrity="sha256-VHXlhDSstVbWIKI1MKXn2BDZlhTOABnfw21yumcAs8k="></script></body></html>